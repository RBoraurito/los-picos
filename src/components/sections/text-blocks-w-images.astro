---
import { containerStyles } from '~/styles/container';
import clsx from 'clsx';
import type { SectionType } from '~/types/helper';
import { urlForImage } from "~/lib/image-resolver";
import {PortableText} from '@portabletext/react'

type Props = SectionType<'text-blocks-w-images'>;

const {images, blocks, _key, title} = Astro.props;
---

<section id={_key} class="flex justify-center bg-gray-50">
  <div class={clsx(containerStyles, "grid grid-cols-1 lg:grid-cols-2 gap-2 lg:gap-12 py-12 lg:py-24")}>
    {images && images.length > 0 && (
      <div class="grid grid-cols-3 gap-4">
        {images.map((image, index) => {
          const imageProps = urlForImage(image);
          return (
              <img src={imageProps.url()} alt={title} class={clsx("object-cover h-full rounded-lg", {
                'lg:mt-8': index === 0,
                'lg:-mt-8': index === 1,
              })} />
          );
        })}
      </div>
    )}
    <div class="flex flex-col justify-start py-6">
      <h2 class="text-3xl lg:text-5xl leading-snug font-display mb-4 text-primary-500">{title}</h2>
      <div class="grid lg:grid-cols-2 gap-4">
          {blocks?.map((block) => 
            block.content && (
              <div>
                <PortableText
                  value={block.content}
                />
              </div>
            )
          )}
      </div>
    </div>
  </div>
</section>